# Leetcode: 532. K-diff Pairs in an Array.

- https://gist.github.com/lbvf50mobile/b9289a9890de0a7fb296b74fceb06ae4

**Ruby: Hash as Counter and one loop.**

Everything starts from Algebra.  `n[i] - n[j] = k; n[i] = k + n[j];`;
Ok but thinkgs a little bit more complicate, because there is an absolute value.  

`|n[i] - n[j]| = k` means two possible vairants.

- `n[i] - n[j] = k; n[i] = k + n[j]; `
- `n[i] - n[j] = -k; n[i] = n[j] - k;` 
  
Need to check both of them. Now it is `j` and definetely one `j`, and number of paris generatind this `j` would be equal number of `n[i]` values which stends befroe `j`. This number could be found by asking: `HashCounter[n[i]]` how many such values were met. But we do not know `n[i]` but we know `n[i] = k + n[j] or n[i] = n[j] - k`.


Let's try.

Ruby code:
```Ruby
# Leetcode: 532. K-diff Pairs in an Array.
# https://leetcode.com/problems/k-diff-pairs-in-an-array/
# @param {Integer[]} nums
# @param {Integer} k
# @return {Integer}
def find_pairs(nums, k)
  hash_counter = {}
  ans_counter = 0
  # |nums[i] - nums[j]| == k;
  # nj - stance for nums[j];
  # ni - stance for nums[i];
  nums.each do |nj|
    ni_1 = k + nj
    ni_2 = nj - k
    if 0 == k
      ans_counter += hash_counter[ni_1] if hash_counter[ni_1]
      ans_counter += hash_counter[ni_2] if hash_counter[ni_2]
    else
      ans_counter += hash_counter[ni_1] if hash_counter[ni_1]
    end
    hash_counter[nj] ||= 0
    hash_counter[nj] += 1
  end
  ans_counter
end
```
