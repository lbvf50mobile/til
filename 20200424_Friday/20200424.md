# Leetcode: 687.

```Ruby
# Definition for a binary tree node.
# class TreeNode
#     attr_accessor :val, :left, :right
#     def initialize(val)
#         @val = val
#         @left, @right = nil, nil
#     end
# end

# @param {TreeNode} root
# @return {Integer}
def longest_univalue_path(root)
    
    max = 0
    return max if root.nil?
    root.length = 0
    queue = [root.length]
    while ! queue.empty?
        x = queue.shift
        max = x.length if max < x.length
        if x.left
            element = x.left
            element.length = element.val == x.val ? x.length + 1 : 0
            queue.push(element)
        end
        if x.rigth
            element == x.right
            element.length = element.val == x.val ? x.length + 1 : 0
            queue.push(element)
        end
    end
    
    max
end
```