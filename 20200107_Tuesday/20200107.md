# Leetcode: 1049. Last Stone Weight II.

- https://leetcode.com/problems/last-stone-weight-ii/

```Ruby
# 1049. Last Stone Weight II
# https://leetcode.com/problems/last-stone-weight-ii/

# @param {Integer[]} stones
# @return {Integer}
def last_stone_weight_ii(stones)
    @min_weight_from_size = Array.new(stones.size+1)
    @min_weight_from_size[0] = 0
    @min_weight_from_size[stones.size] = stones.sum
    @visited_sets = {}
    @visited_sets[[].inspect] = true
    stones.sort!
    @visited_sets[stones.inspect] = true
    recursion(stones)
    @min_weight_from_size[1] ?  @min_weight_from_size[1] : 0
end

def recursion(stones)
    # p stones
    sum = stones.sum
    val = @min_weight_from_size[stones.size]
    @min_weight_from_size[stones.size] = sum if val.nil? || val > sum
    # p  @min_weight_from_size
    stones.each_with_index do |stone, index|
        # remove index
        new_stones = stones
            .each_with_index
            .each_with_object([]){|(x,i),o| 
                new_stone = (x-stone).abs
                o.push(new_stone) if i != index && new_stone.nonzero?
                }.sort
        label = new_stones.inspect
        if @visited_sets[label].nil?
            @visited_sets[label] = true
            recursion(new_stones)
        end
    end
end
```