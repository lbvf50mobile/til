# Leetcode: 76. Minimum Window Substring.

- https://leetcode.com/problems/minimum-window-substring/
- https://gist.github.com/lbvf50mobile/0cc690a1313cee229d6064e842445d93


```Ruby
# 76. Minimum Window Substring
# https://leetcode.com/problems/minimum-window-substring/
# @param {String} s
# @param {String} t
# @return {String}
def min_window(s, t)
    return "" if s.empty?
    return "" if t.empty?
    return t if t.size == 1 && s[t]
    
    # Could T contain dublicates?
    # What symbols set do S and T condtain?
    pattern = t.chars.each_with_object({}){|v,o| o[v] ||= 0; o[v] += 1}
    state = pattern.clone.to_a.map{|x| x[1] = 0}.to_h
    state_valid = ->{ pattern.to_a.zip(state.to_a).all?{|(x,y)| x[1] <= y[1] }}
    answer = ""
    queue = [s[0]]
    state[s[0]] +=1 if state[s[0]]
    
    while i < s.size && j < s.size
        # shrink
        if state_valid[]
            if answer.size < t.size
                answer = queue.join
            else
                tmp = queue.join
                return tmp if tmp.size == t.size
                answer = tmp if answer.size > tmp.size
            end
            tmp = queue.shift
            state[tmp] -= 1 if state[tmp]
            i += 1
        else
            j+=1
            if j < s.size
                queue.push(s[j])
                state[queue.last] += 1 if state[queue.last]
            end
        end
    end
    answer
end
```