# Leetcode: 581. Shortest Unsorted Continuous Subarray.

- https://leetcode.com/problems/shortest-unsorted-continuous-subarray/
- https://gist.github.com/lbvf50mobile/7df57f3e5d56ef7cb01ee6cd70e510da

```Ruby
# 581. Shortest Unsorted Continuous Subarray (does not works)
# https://leetcode.com/problems/shortest-unsorted-continuous-subarray/
# @param {Integer[]} nums
# @return {Integer}
def find_unsorted_subarray(n)
    # Check array is not sorted.
    return 0 if n == n.sort
    # Find left bound of unsorted array.
    i = 0
    while i < n.size-1 && n[i] <= n[i+1]
        i += 1
    end
    # Find right bound of unsorted array.
    j = n.size - 1
    while j > 0 && n[j] >= n[j-1]
        j -= 1
    end
    p [i,j]
    # Move left bound left, to the left most equal consequtive value.
    i1 = i
    while i1 >= 0 && n[i] == n[i1]
        i1 -= 1
    end
    i1 += 1
   
    # More right bound right, to the right most equal consequtive value.
    j1 = j
    while j1 < n.size && n[j1] == n[j]
        j1 += 1
    end
    j1 -= 1
    
    # Return lengh of [i1,j1] interval
    p [i1,j1]
    p [n[i1],n[j1]]
    j1 - i1 + 1
end
```

![use 4 loops](581lc.png)

### Sort and compare suffix and preffix.

Thanks @dizzy57.

```Ruby
# 581. Shortest Unsorted Continuous Subarray (does not works)
# https://leetcode.com/problems/shortest-unsorted-continuous-subarray/
# @param {Integer[]} nums
# @return {Integer}
def find_unsorted_subarray(n)
    s = n.sort
    return 0 if s == n
    left = 0
    while n[left] == s[left]
        left += 1
    end
    right = n.size - 1
    while n[right] == s[right]
        right -= 1
    end
    right - left + 1
end
```