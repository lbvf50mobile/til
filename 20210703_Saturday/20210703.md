# Leetcode: 658. Find K Closest Elements.

- https://leetcode.com/explore/challenge/card/july-leetcoding-challenge-2021/608/week-1-july-1st-july-7th/3800/
- https://gist.github.com/lbvf50mobile/7011a8f70cce1d21993a651e2e5d8ac3 
- https://leetcode.com/problems/find-k-closest-elements/

Idea is to create sliding window with k elements that is defined by sum of differences and last index of windows. Find minimum. And at the of the loop slice the window from array.

Ruby code:
```Ruby
# Leetcode: Find K Closest Elements.
# https://leetcode.com/explore/challenge/card/july-leetcoding-challenge-2021/608/week-1-july-1st-july-7th/3800/
# Accepted.
# Thanks God!
# @param {Integer[]} arr
# @param {Integer} k
# @param {Integer} x
# @return {Integer[]}
def find_closest_elements(arr, k, x)
  a = arr.map{|el| (el-x).abs}
    # p a
    # p arr
    sum = 0
    (0...k).each do |i|
        sum += a[i]
    end
    min = sum
    j = k-1
    
    (k...a.size).each do |i|
        sum -= a[i-k]
        sum += a[i]
        if sum < min
            min = sum
            j = i
        end
        # p [i,sum]
    end
    # p a
    # p arr
    arr[j-k+1..j]
end
```
Ok. It's time to solve.

# Leetcode: Max Sum of Reactangle no large then K.

- https://leetcode.com/explore/challenge/card/july-leetcoding-challenge-2021/608/week-1-july-1st-july-7th/3801/

I will start from solution on one line matrix.

- https://youtu.be/N0_816yrFrY
- https://www.geeksforgeeks.org/subarray-whose-sum-is-closest-to-k/


Idea is: Save prefix somes for `i` in a sorted array with uniq values. To make uniq set would have and on each step the prefix array will be sorted.
Next there is `PS` current and `SPS` search prefix sum.  `SPS` stays before. So idealy `PS - SPS = K`.

```
PS - SPS <= K
PS - K - SPS <= 0
PS - K <= SPS
```

Now I have a question must it be left or right, lets consiter left. Because I'm seeking (PS-K) this is what I really get. **But Wait!**
X it is SPS, PS-K <= X.

- https://www.rubydoc.info/stdlib/core/Array:bsearch

When I have a SPS, I can create SUM and check it. It must be les then K but Maximum.

- https://gist.github.com/lbvf50mobile/68320d9718dd355eeaa373de5380a20e

