# Leetcode: 1277. Count Square Submatrices with All Ones. Top-down DP.

Ruby code:
```Ruby
# Leetcode: 1277. Count Square Submatrices with All Ones.
# https://leetcode.com/problems/count-square-submatrices-with-all-ones/
# @param {Integer[][]} matrix
# @return {Integer}
def count_squares(matrix)
    # Extend matrix with zero column and row to simplify addressing.
    @mtx = matrix.map{|el| [0] + el}
    @mtx.unshift(Array.new(@mtx[0].size,0))
    # Create DP matrix to save sub sulutions.
    @dp = Array.new(@mtx.size).map{ Array.new(@mtx[0].size)}
    # Fill with zeros top row, and left column.
    (0...@mtx[0].size).each{|j| @dp[0][j] = 0}
    (0...@mtx.size).each{|i| @dp[i][0] = 0}
    @count = 0
    # Top-down solution. Start recurcive iteration from 
    # the last cell "right-bottom" and count how many
    # squares sotre it's right bottom corner at this cell.
    # Top-down because starting from potentially bigest
    # square and visited squares would contain only one element.
    recursion(@mtx.size-1, @mtx[0].size-1)
    @count
end

```